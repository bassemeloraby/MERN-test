<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <title>todo app</title>
  </head>
  <body style="background-color: #9ec1cd">
    <div align="center">
      <div
        style="
          background-color: #dde6e9;
          margin-top: 10%;
          width: 600px;
          border-radius: 20px;
        "
      >
        <h2>MERN steps</h2>
        <!-- add task -->
        <form action="/create" method="post">
          <input type="text" name="title" /> <br />
          <br />
          <button type="submit" class="btn btn-secondary">insert</button>
        </form>
        <br />
        <!-- show tasks -->
        <%if (todotasks.length > 0) { %>
        <div class="card" style="width: 18rem">
          <ul class="list-group list-group-flush">
            <% todotasks.forEach(tasks =>{ %>
                <% if(tasks._id == idTask){ %>
                    <li class="list-group-item">
                        <form action="/update/<%=tasks._id%>?_method=PUT" method="POST">
                            <input type="text" value="<%=tasks.title %>" name="title">
                            <!-- accept changes -->
                  <button type="submit" class="btn btn-primary">
                    accept
                  </button>
                  <!--cancel the changes -->
                  <a style="text-decoration: none;" href="/" >
                    cancel
                  </a>
                        </form>
                    </li>
                <%} else {%>    
            <li class="list-group-item">
              <%= tasks.title %>
              <!-- update task -->
              <button type="button" class="btn btn-warning">
                <a
                  style="text-decoration: none; color: black"
                  href="/update/<%=tasks._id%>"
                  >update</a
                >
              </button>
              
              <!-- delete task -->
              <a href="/delete/<%=tasks._id%>?_method=delete">delete</a>
            </li>
            <%}%>
            <% })%>
          </ul>
        </div>
        <br />
        <%}%>
      </div>
    </div>
  </body>
</html>
